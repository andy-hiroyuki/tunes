doctype html
html(ng-app="App")

  include ./_layouts/head.jade

  body(layout="column" ng-controller="AppCtrl")

    div(flex layout="row")
      md-sidenav.site-sidenav.md-sidenav-left.md-whiteframe-z2(layout="column" md-component-id="left" md-is-locked-open="$mdMedia('gt-sm')")
        include ./_layouts/sidenav.jade

      #content(flex layout="column")

        include ./_layouts/about.jade

        include ./_layouts/player.jade

        md-content(flex layout="column" ng-show="useTracks")
          #tracklistarea(flex layout="column" layout-fill ng-controller="TuneCtrl as tune")
            md-content.md-padding
              section.md-whiteframe-z1
                md-list(ng-show="tracklist")
                  .track(ng-repeat=("track in tracklist.tracks"))
                    md-list-item.md-3-line(flex)
                      .avatar
                      .md-list-item-text(ng-click="tune.play($index+1)")
                        h3
                          span.title(ng-bind="track.title")
                          .time(ng-bind="convertTime(track.time)")
                        p
                          md-button.tag(ng-repeat=("tag in track.tags") aria-label="{{tag}}") {{tag}}
                      md-button.md-raised.download(hide-sm ng-click="tune.openDownloadDialog($event, track)")
                        i(class="material-icons") file_download
                        | ダウンロード
                    md-divider(ng-if="!$last")


    md-button.md-icon-button.md-fab.md-fab-bottom-right(ng-click="toggleSidenav('left')" hide-gt-sm)
      md-icon(ng-style="{color: font.color}" aria-label="Menu" md-svg-icon="https://s3-us-west-2.amazonaws.com/s.cdpn.io/68133/menu.svg")


    script(src="/components.js")
    script(src="/FileSaver.min.js")
    script(src="/app.js")
    script(src="/bar-ui/script/bar-ui.js")
    script.
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-66233589-1', 'auto');
      ga('send', 'pageview');

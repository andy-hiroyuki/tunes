(function(){var t;t=angular.module("App",["ngMaterial","ngRoute"]),t.value("_pick",{}),t.controller("AppCtrl",["_pick","$scope","$mdSidenav","$mdDialog","$http",function(t,n,e,r,o){var u,s,a,l;n.toggleSidenav=function(t){e(t).toggle()},n.logoClick=function(t){t.preventDefault(),n.transPage(null,"home")},n.listset,function(){return o.get("tracklists/__listset.json").success(function(t){return n.listset=t}).error(function(t,n,e,r){return console.error("Error! -- data:"+t+"  status:"+n)})}(),n.summary,function(){return o.get("tracklists/__summary.json").success(function(t){var e,r,o,u,a,l,c,i,d,f,m;for(n.summary=t,i=n.listset.genrelist,r=0,a=i.length;a>r;r++)e=i[r],e.count=s(e.id);for(d=n.listset.tastelist,o=0,l=d.length;l>o;o++)e=d[o],e.count=s(e.id);for(f=n.listset.scenelist,m=[],u=0,c=f.length;c>u;u++)e=f[u],m.push(e.count=s(e.id));return m}).error(function(t,n,e,r){return console.error("Error! -- data:"+t+"  status:"+n)})}(),s=function(t){return n.summary[t]?n.summary[t].count:void 0},n.convertTime=function(t){return Tunes.convertDuration(1e3*t)},n.useHeader,n.useAbout,n.useTracks,n.tracklist,n.transPage=function(t,e){var r;return t&&t.preventDefault(),"home"===e?(n.useHeader=!0,n.useAbout=!1,n.useTracks=!0,r=a("home")):"about"===e?(n.useHeader=!1,n.useAbout=!0,n.useTracks=!1):(n.useHeader=!1,n.useAbout=!1,n.useTracks=!0,r=a(e))},a=function(t){return o.get("tracklists/"+t+".json").success(function(t){return n.tracklist=t,$("ul.sm2-playlist-bd").empty(),Tunes.appendTrackAll(t.tracks),n.listname=t.listname}).error(function(t,n,e,r){return console.error("Error! -- data:"+t+"  status:"+n)})},l=function(){return n.transPage(null,"about")},n.openDownloadDialog=function(e,o){t.track=o,r.show({controller:u,templateUrl:"download.tmpl/index.html",parent:angular.element(document.body),targetEvent:e}).then(function(t){n.alert='You said the information was "'+t+'".',console.log(t)},function(){n.alert="You cancelled the dialog."})},u=function(t,n,e){return n.pick=t.track,n.hide=function(){e.hide()},n.cancel=function(){e.cancel()},n.answer=function(t){e.hide(t)},n.showAbout=function(){e.hide(),l()},n.download=function(t){Tunes.download(t)}},n.transPage(null,"home")}]),t.controller("TracklistCtrl",["$scope","$http",function(t,n){t.play=function(t){var n;return n="#"+t+" a",$(".sm2-playlist-drawer ul.sm2-playlist-bd").find(n)[0].click()}}])}).call(this);
(function(){window.Tunes=function(){function t(){}return t.server_webroot="http://oto-no-sono.com",t.prototype.musics={},t.appendTrackAll=function(e){return e.forEach(function(e,n){var r;r=t.server_webroot+e.filepath,0===n&&$(".sm2-playlist-target ul.sm2-playlist-bd").append("<li>"+e.title+"</li>"),$(".sm2-playlist-drawer ul.sm2-playlist-bd").append('<li id="'+(n+1)+'"><a href="'+r+'">'+e.title+"</a></li>")})},t.convertDuration=function(t){var e,n,r,o;return e=String(Math.floor(t/36e5)+100).substring(1),r=String(Math.floor((t-36e5*e)/6e4)+100).substring(1),o=String(Math.round((t-36e5*e-6e4*r)/1e3)+100).substring(1),n=60*Number(e)+Number(r),n+":"+o},t.download=function(e){var n,r;r=new XMLHttpRequest,n=t.server_webroot+e.filepath,r.open("GET",n,!0),r.filename=e.filepath.match(/[a-zA-Z]+.mp3/),r.responseType="blob",r.send(),r.onload=function(){200===this.status&&saveAs(this.response,this.filename)}},t}()}).call(this);